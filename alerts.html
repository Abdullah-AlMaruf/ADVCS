{% extends "base.html" %}
{% block title %}Active Alerts â€” ADVCS{% endblock %}
{% block page_title %}Active Alerts â€” {{ current_user.area.name }}{% endblock %}

{% block content %}
<a href="{{ url_for('volunteer.dashboard') }}" class="link-back">â† Back to Dashboard</a>

<div class="mt-2">
    {% if disasters %}
    {% for d in disasters %}
    <div class="disaster-card">
        <div class="disaster-header">
            <span class="disaster-type">{{ d.disaster_type }}</span>
            <span class="badge {{ d.status_badge }}">{{ d.status }}</span>
        </div>
        <div class="disaster-meta">
            <span>ğŸ“ {{ d.location }}</span>
            <span>ğŸ‘¤ Reported by {{ d.reporter.username }}</span>
            <span>ğŸ• {{ d.created_at.strftime('%b %d, %Y %H:%M') }}</span>
            <span>âœ‹ {{ d.responses|length }} response(s)</span>
        </div>
        <div class="disaster-desc">{{ d.description }}</div>
        {% if d.id not in responded_ids %}
        <form method="POST" action="{{ url_for('volunteer.respond', disaster_id=d.id) }}">
            <div class="form-group">
                <input type="text" name="message" class="form-control" placeholder="Optional messageâ€¦">
            </div>
            <button type="submit" class="btn btn-success btn-sm">âœ‹ Respond & Help</button>
        </form>
        {% else %}
        <span class="badge badge-success">âœ… Already responded</span>
        {% endif %}
    </div>
    {% endfor %}
    {% else %}
    <div class="card">
        <div class="empty-state">
            <div class="empty-icon">âœ…</div>
            <p>No active alerts at this time.</p>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}